'use strict';var d=function(a,b,e,c,f){this.i=a;this.h=b;this.b=e;this.c=c;this.a=!1;this.f=null;this.l(f)};
d.prototype.l=function(a){if(a=a||window.location.search){for(var b={},e=/([^&=]+)=?([^&]*)/g,c;c=e.exec(a.substring(1));)b[decodeURIComponent(c[1])]=decodeURIComponent(c[2]);if(a=b.routeId)this.i.textContent="Casting:",this.h.textContent="",this.b.title="Mute",this.c.title="Unmute",this.g(),b=function(a){a&&a.key&&" "!=a.key&&"Enter"!=a.key||(this.muteOrUnmute(),this.g())}.bind(this),this.b.onclick=b,this.b.onkeydown=b,this.c.onclick=b,this.c.onkeydown=b,(new PresentationRequest("chrome://media-router/cloudmrp-mirroring")).reconnect(a).then(function(a){this.f=
a;this.f.onmessage=this.j.bind(this);this.f.send('{"type":"STATUS_REQUEST"}')}.bind(this),null)}};d.prototype.muteOrUnmute=function(){this.a=!this.a;this.f.send('{"type":"MUTE", "data": {"mute":'+this.a+"}}")};d.prototype.g=function(){this.a?(this.c.style.display="",this.b.style.display="none"):(this.c.style.display="none",this.b.style.display="")};
d.prototype.j=function(a){if(a=a.data)a=JSON.parse(a),"STATUS_RESPONSE"==a.type&&a.data&&(a=a.data,a.routeDescription&&(this.h.textContent=a.routeDescription),void 0!=a.mute&&(this.a=a.mute,this.g()))};window.addEventListener("DOMContentLoaded",function(){window.routeController=new d(document.getElementById("displayNameHolder"),document.getElementById("statusTextHolder"),document.getElementById("mute"),document.getElementById("unmute"))});
